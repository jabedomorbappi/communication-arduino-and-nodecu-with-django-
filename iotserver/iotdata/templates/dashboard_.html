{% load static %}
{% extends "base_dashboard.html" %}
{% block title %}Vehicle IoT Dashboard{% endblock %}

{% block content %}

<!-- HEADER -->
<div class="header">
    <h1><i class="fas fa-car-side"></i> Vehicle IoT Dashboard</h1>

    <div class="right-actions">
        <div id="connection-status" class="status-badge status-disconnected">
            WAITING...
        </div>

        <div class="theme-toggle" id="themeToggle">
            <i class="fas fa-sun"></i>
        </div>
    </div>
</div>

<!-- CONNECTION -->
<div class="glass-container">
    <h2 class="section-title"><i class="fas fa-plug"></i> Connection</h2>
    <p id="nodemcu-ip-display">NodeMCU IP: Searching...</p>
</div>

<!-- LIGHT CONTROL -->
<div class="glass-container">
    <h2 class="section-title"><i class="fas fa-lightbulb"></i> Light Control</h2>
    <div class="controls-grid">
        <div class="control-card">
            <h3>Common Light</h3>
            <label class="switch">
                <input type="checkbox" id="commonSwitch">
                <span class="slider"></span>
            </label>
        </div>

        <div class="control-card">
            <h3>Arduino Relay</h3>
            <label class="switch">
                <input type="checkbox" id="arduinoSwitch">
                <span class="slider"></span>
            </label>
        </div>

        <div class="control-card">
            <h3>NodeMCU Relay</h3>
            <label class="switch">
                <input type="checkbox" id="nodemcuSwitch">
                <span class="slider"></span>
            </label>
        </div>
    </div>
</div>

<!-- METRICS -->
<div class="glass-container">
    <h2 class="section-title"><i class="fas fa-gauge-high"></i> Performance</h2>
    <div class="key-metrics-grid">
        <div class="key-metric-card">
            <div class="key-metric-label">Speed</div>
            <div class="key-metric-value" id="speed">0.0</div>
            <div id="speed-gauge"></div>
        </div>

        <div class="key-metric-card">
            <div class="key-metric-label">Piezo Voltage</div>
            <div class="key-metric-value" id="piezo">0.0</div>
        </div>

        <div class="key-metric-card">
            <div class="key-metric-label">Latency</div>
            <div class="key-metric-value">
                <span id="latency_diff">—</span> ms
            </div>
        </div>
    </div>
</div>

<!-- IR -->
<div class="glass-container">
    <h2 class="section-title"><i class="fas fa-satellite-dish"></i> IR Sensors</h2>
    <div class="ir-grid">
        <div class="ir-card ir-unknown">
            <div class="ir-value" id="arduino_ir1">—</div>
            <div class="ir-label">Arduino IR1</div>
        </div>
        <div class="ir-card ir-unknown">
            <div class="ir-value" id="arduino_ir2">—</div>
            <div class="ir-label">Arduino IR2</div>
        </div>
        <div class="ir-card ir-unknown">
            <div class="ir-value" id="nodemcu_ir1">—</div>
            <div class="ir-label">NodeMCU IR1</div>
        </div>
        <div class="ir-card ir-unknown">
            <div class="ir-value" id="nodemcu_ir2">—</div>
            <div class="ir-label">NodeMCU IR2</div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<!-- JS -->
<script src="{% static 'js/dashboard.js' %}"></script>
{% endblock %}
